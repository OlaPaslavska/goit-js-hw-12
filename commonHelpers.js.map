{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from \"izitoast\"\nimport \"izitoast/dist/css/iziToast.min.css\"\n\nconst articlesApi = axios.create({\n    baseURL: 'https://pixabay.com/',\n});\n\nexport async function getImages(inputValue, currentPage, perPage) {\n    try {\n        const params = {\n            key: '44654317-b43c54b885daf7a418bb31fe3',\n            q: inputValue,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: currentPage,\n            per_page: perPage,\n        };\n        const res = await articlesApi.get('api/', { params });\n        return res.data;\n    }catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: `${err}`,\n            layout: 2,\n            displayMode: 'once',\n            backgroundColor: '#ef4040',\n            progressBarColor: '#B51B1B',\n            position: 'topRight'\n        });\n    }\n}","import iziToast from \"izitoast\"\nimport \"izitoast/dist/css/iziToast.min.css\"\n\n\nexport let markup = '';\nexport const refs = {\n    form: document.querySelector('.form'),\n    input: document.querySelector('.input'),\n    button: document.querySelector('button'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n      loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nexport async function imagesTemplate(imagesObj) { \n    let markup = imagesObj.map(image => {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\"\n        href=\"${image.largeImageURL}\">\n        <image \n        width=\"360\";\n        height=\"200\";\n         class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"/>\n        </a>\n        <div class=\"gallery-card-container\">\n       <ul class=\"text-list\">\n     <li class=\"text-item\">\n       <p class=\"text-item-name\"><strong>Likes:</strong></p>\n       <p class=\"text-item-quantity\">${image.likes}</p>\n     </li>\n     <li class=\"text-item\">\n       <p class=\"text-item-name\"><strong>Views</strong></p>\n       <p class=\"text-item-quantity\">${image.views}</p>\n     </li>\n     <li class=\"text-item\">\n       <p class=\"text-item-name\"><strong>Comments</strong></p>\n       <p class=\"text-item-quantity\">${image.comments}</p>\n     </li>\n     <li class=\"text-item\">\n       <p class=\"text-item-name\"><strong>Downloads</strong></p>\n       <p class=\"text-item-quantity\">${image.downloads}</p>\n     </li>\n   </ul>\n</div>\n</li>`;\n    })\n        .join('');\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n// Ця функція показує завантажувач, видаляючи клас 'hidden' з елементу завантажувача (refs.loader)\n\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\n// Ця функція приховує завантажувач, додаючи клас 'hidden' до елементу завантажувача (refs.loader).\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\n// Ця функція показує кнопку \"Load More\", видаляючи клас 'hidden' з елементу кнопки завантаження (refs.loadMoreBtn).\nexport function showLoadMore() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\n\n// Ця функція приховує кнопку \"Load More\", додаючи клас 'hidden' до елементу кнопки завантаження (refs.loadMoreBtn).\nexport function hideLoadMore() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n\n// Ця функція перевіряє, чи поточна сторінка (currentPage) перевищує або дорівнює максимальній сторінці (maxPage)\n// export function checkEndPages(currentPage, maxPage, perPage) {\n//   if (currentPage >= maxPage || data.hits.length < perPage) {\n//     hideLoadMore();\n\n//     if (maxPage) {\n//       iziToast.info({\n//         title: 'The end!',\n//         message: \"We're sorry, but you've reached the end of search results.\",\n//       });\n//     }\n//   } else {\n//     showLoadMore();\n//   }\n// }\nexport function skipOldElement(x = 0, y = 0) {\n  const liEl = refs.gallery.children[0];\n  const height = liEl.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: height * 2,\n    left: y,\n    behavior: 'smooth',\n  });\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImages } from './js/pixabay-api';\nimport {imagesTemplate, showLoader, hideLoader, showLoadMore, hideLoadMore, checkEndPages, skipOldElement} from './js/render-functions';\n\n  export const refs = {\n    form: document.querySelector('.form'),\n    input: document.querySelector('.input'),\n    button: document.querySelector('button'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n      loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nlet inputValue = '';\nlet currentPage = 1;\nlet perPage = 15;\nlet maxPage = 1;\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\nrefs.form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    \n     inputValue = refs.input.value.trim();\n  currentPage = 1;\n\n// Очищення галереї перед новими результатами\n  if (inputValue === '') {\n    refs.gallery.innerHTML = ' ';\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please, enter the query.',\n      backgroundColor: '#ef4040',\n      layout: 2,\n      position: 'topRight',\n      displayMode: 'once',\n    });\n    refs.form.reset();\n    return;\n  }\n\n  showLoader();\n  refs.gallery.innerHTML = ' ';\n   hideLoadMore();\n  try {\n    const data = await getImages(inputValue, currentPage, perPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        layout: 2,\n        displayMode: 'once',\n        backgroundColor: '#ef4040',\n        progressBarColor: '#B51B1B',\n        position: 'topRight',\n      });\n      hideLoader();\n      refs.form.reset();\n      return;\n    }\n\n    imagesTemplate(data.hits);\n    lightbox.refresh();\n     if (currentPage < maxPage) {\n            showLoadMore();\n        } else {\n            hideLoadMore();\n        }\n        hideLoader();\n        refs.form.reset();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  }\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  hideLoadMore();\n  showLoader();\n currentPage++;\n    try {\n        const data = await getImages(inputValue, currentPage, perPage);\n\n        if (data.hits.length == 0 || currentPage >= maxPage) {\n        hideLoadMore();\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topCenter',\n                timeout: 5000\n            });\n            //   hideLoader();\n            hideLoadMore();\n    }else{\n       imagesTemplate(data.hits);\n      lightbox.refresh();\n      showLoadMore();\n    }\n    //   showLoadMore();\n      hideLoader();\n    // checkEndPages(currentPage, maxPage);\n    skipOldElement();\n  } catch (error) {\n    refs.gallery.innerHTML = ' ';\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  }\n\n});\n"],"names":["articlesApi","axios","getImages","inputValue","currentPage","perPage","params","iziToast","refs","imagesTemplate","imagesObj","markup","image","showLoader","hideLoader","showLoadMore","hideLoadMore","skipOldElement","x","y","height","maxPage","lightbox","SimpleLightbox","e","data","error"],"mappings":"owBAKA,MAAMA,EAAcC,EAAM,OAAO,CAC7B,QAAS,sBACb,CAAC,EAEM,eAAeC,EAAUC,EAAYC,EAAaC,EAAS,CAC9D,GAAI,CACA,MAAMC,EAAS,CACX,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACtB,EAEQ,OADY,MAAML,EAAY,IAAI,OAAQ,CAAE,OAAAM,CAAM,CAAE,GACzC,IACd,MAAc,CACXC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,GAAG,GAAG,GACf,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UACtB,CAAS,CACJ,CACL,CC5BO,MAAMC,EAAO,CAChB,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,QAAQ,EACtC,OAAQ,SAAS,cAAc,QAAQ,EACvC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACtC,YAAa,SAAS,cAAc,gBAAgB,CAC1D,EAEO,eAAeC,EAAeC,EAAW,CAC5C,IAAIC,EAASD,EAAU,IAAIE,GAChB;AAAA;AAAA,gBAECA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,eAKpBA,EAAM,YAAY;AAAA,eAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAMcA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,uCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,MAKjD,EACI,KAAK,EAAE,EACZJ,EAAK,QAAQ,mBAAmB,YAAaG,CAAM,CACvD,CAGO,SAASE,GAAa,CAC3BL,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAIO,SAASM,GAAa,CAC3BN,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CAGO,SAASO,GAAe,CAC7BP,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CAGO,SAASQ,GAAe,CAC7BR,EAAK,YAAY,UAAU,IAAI,QAAQ,CACzC,CAiBO,SAASS,EAAeC,EAAI,EAAGC,EAAI,EAAG,CAE3C,MAAMC,EADOZ,EAAK,QAAQ,SAAS,CAAC,EAChB,sBAAqB,EAAG,OAE5C,OAAO,SAAS,CACd,IAAKY,EAAS,EACd,KAAMD,EACN,SAAU,QACd,CAAG,CACH,CC1FS,MAAMX,EAAO,CAClB,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,QAAQ,EACtC,OAAQ,SAAS,cAAc,QAAQ,EACvC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACtC,YAAa,SAAS,cAAc,gBAAgB,CAC1D,EAEA,IAAIL,EAAa,GACbC,EAAc,EACdC,EAAU,GACVgB,EAAU,EAGd,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAGDf,EAAK,KAAK,iBAAiB,SAAU,MAAOgB,GAAM,CAOhD,GANEA,EAAE,eAAc,EAEfrB,EAAaK,EAAK,MAAM,MAAM,KAAI,EACrCJ,EAAc,EAGVD,IAAe,GAAI,CACrBK,EAAK,QAAQ,UAAY,IACzBD,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,2BACT,gBAAiB,UACjB,OAAQ,EACR,SAAU,WACV,YAAa,MACnB,CAAK,EACDC,EAAK,KAAK,QACV,MACD,CAEDK,IACAL,EAAK,QAAQ,UAAY,IACxBQ,IACD,GAAI,CACF,MAAMS,EAAO,MAAMvB,EAAUC,EAAYC,EAAaC,CAAO,EAE7D,GADAgB,EAAU,KAAK,KAAKI,EAAK,UAAYpB,CAAO,EACxCoB,EAAK,KAAK,SAAW,EAAG,CAC1BlB,EAAS,MAAM,CACb,QACE,2EACF,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAClB,CAAO,EACDO,IACAN,EAAK,KAAK,QACV,MACD,CAEDC,EAAegB,EAAK,IAAI,EACxBH,EAAS,QAAO,EACXlB,EAAciB,EACXN,IAEAC,IAEJF,IACAN,EAAK,KAAK,OACf,OAAQkB,EAAO,CACdnB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,GAAGmB,CAAK,GACjB,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAChB,CAAK,CACF,CACH,CAAC,EAEDlB,EAAK,YAAY,iBAAiB,QAAS,SAAY,CACrDQ,IACAH,IACDT,IACG,GAAI,CACA,MAAMqB,EAAO,MAAMvB,EAAUC,EAAYC,EAAaC,CAAO,EAEzDoB,EAAK,KAAK,QAAU,GAAKrB,GAAeiB,GAC5CL,IACIT,EAAS,KAAK,CACV,MAAO,OACP,QAAS,6DACT,SAAU,YACV,QAAS,GACzB,CAAa,EAEDS,MAELP,EAAegB,EAAK,IAAI,EACzBH,EAAS,QAAO,EAChBP,KAGAD,IAEFG,GACD,OAAQS,EAAO,CACdlB,EAAK,QAAQ,UAAY,IACzBD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,GAAGmB,CAAK,GACjB,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAChB,CAAK,CACF,CAEH,CAAC"}